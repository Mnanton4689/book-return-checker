<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üìö Book Return Auto Submit</title>
<style>
  body { font-family: Arial; padding: 20px; }
  .container { max-width: 500px; margin: auto; }
  .status { margin-top: 15px; font-weight: bold; }
</style>
</head>
<body>
<div class="container">
  <h1>üìö Book Return Checker</h1>
  <input type="text" id="barcodeInput" placeholder="Enter barcode..." autofocus>
  <div id="bookDetails"></div>
  <button id="submitBtn" style="display:none;">Submit to Google Form</button>
  <div class="status" id="statusMessage"></div>
</div>

<script>
const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdxDH5XNcQgYo0c8UOKguy8vJPXEK9xB10yJpTOwNH4mfDcwA/formResponse";

// ‚úÖ Your actual entry IDs
const ENTRY_TITLE = "entry.246099778";
const ENTRY_AUTHOR = "entry.1304120790";
const ENTRY_ARTICLE = "entry.1917608776";
const ENTRY_LAST_RECEIVED = "entry.128692095";
const ENTRY_VENDOR = "entry.500217163";

let currentBook = null;

// Simulate book lookup (replace with real logic or Google Sheets API)
function lookupBook(barcode) {
  // Example: Replace this with your actual lookup logic
  if (barcode === "12345") {
    return {
      title: "Sample Book",
      author: "John Doe",
      article: "A-001",
      last_received: "01/01/2025",
      vendor: "ABC Vendor"
    };
  }
  return null;
}

document.getElementById("barcodeInput").addEventListener("keypress", function(e) {
  if (e.key === "Enter") {
    const barcode = e.target.value.trim();
    const book = lookupBook(barcode);
    const detailsDiv = document.getElementById("bookDetails");
    const submitBtn = document.getElementById("submitBtn");

    if (book) {
      currentBook = book;
      detailsDiv.innerHTML = `
        <p><strong>Title:</strong> ${book.title}</p>
        <p><strong>Author:</strong> ${book.author}</p>
        <p><strong>Article:</strong> ${book.article}</p>
        <p><strong>Last Received:</strong> ${book.last_received}</p>
        <p><strong>Vendor:</strong> ${book.vendor}</p>
      `;
      submitBtn.style.display = "inline-block";
    } else {
      detailsDiv.innerHTML = "<p style='color:red;'>‚ùå Book not found</p>";
      submitBtn.style.display = "none";
    }
    e.target.value = "";
  }
});

document.getElementById("submitBtn").addEventListener("click", async function() {
  if (!currentBook) return;

  const formData = new FormData();
  formData.append(ENTRY_TITLE, currentBook.title);
  formData.append(ENTRY_AUTHOR, currentBook.author);
  formData.append(ENTRY_ARTICLE, currentBook.article);
  formData.append(ENTRY_LAST_RECEIVED, currentBook.last_received);
  formData.append(ENTRY_VENDOR, currentBook.vendor);

  try {
    await fetch(FORM_URL, { method: "POST", body: formData, mode: "no-cors" });
    document.getElementById("statusMessage").textContent = "‚úÖ Submitted successfully!";
    document.getElementById("submitBtn").style.display = "none";
  } catch (error) {
    document.getElementById("statusMessage").textContent = "‚ùå Submission failed.";
  }
});
</script>
</body>
</html>




